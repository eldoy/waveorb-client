window.waveorb=function(e){return function(n,r,t){return function(e,n,r){return new Promise(function(t,o){r||(r={}),n||(n={});var s,a=new XMLHttpRequest;if(a.addEventListener("load",function(){var e=JSON.parse(a.responseText);t(e)}),a.addEventListener("error",function(){o(a)}),a.open(r.method||"POST",e+(r.path||"")),r.files){for(var i in s=new FormData,n)s.append(i,JSON.stringify(n[i]));for(var d of r.files)s.append("file",d,d.name);r.progress&&a.upload.addEventListener("progress",function(e){e.percent=(e.loaded/e.total*100).toFixed(2),r.progress(e)})}else a.setRequestHeader("Content-Type","application/json; charset=utf-8");if(r.headers)for(var i in r.headers)a.setRequestHeader(i,r.headers[i]);a.withCredentials=!0,a.send(s||JSON.stringify(n))})}(e+n,r||{},t||{})}};