window.waveorb=function(e,n={}){return e.indexOf("ws")?function(n={},t={}){return function(e,n,t){return new Promise(function(o,r){t||(t={}),n||(n={});var s,i=new XMLHttpRequest;if(i.addEventListener("load",function(){var e=JSON.parse(i.responseText);o(e)}),i.addEventListener("error",function(){r(i)}),i.open(t.method||"POST",e+(t.path||"")),t.files){for(var a in s=new FormData,n)s.append(a,JSON.stringify(n[a]));for(var f of t.files)s.append("file",f,f.name);t.progress&&i.upload.addEventListener("progress",function(e){e.percent=(e.loaded/e.total*100).toFixed(2),t.progress(e)})}else i.setRequestHeader("Content-Type","application/json; charset=utf-8");if(t.headers)for(var a in t.headers)i.setRequestHeader(a,t.headers[a]);i.withCredentials=!0,i.send(s||JSON.stringify(n))})}(e,n,t)}:function(e,n){n||(n={}),void 0===n.timeout&&(n.timeout=1);for(var t,o={},r=["message","open","close","error"],s=0;s<r.length;s++)o[r[s]]=[];function i(e,...n){for(var t=0;t<o[e].length;t++)o[e][t](...n)}function a(o,r){(t=new WebSocket(e)).onmessage=function(e){i("message",JSON.parse(e.data),e)},t.onopen=function(e){o&&o(f),i("open",f,e)},t.onerror=function(e){r&&r(e),i("error",e)},t.onclose=function(e){n.timeout&&setTimeout(a,n.timeout),i("close",e)}}var f={on:function(e,n){o[e].push(n)},open:a,send:function(e){1==t.readyState&&t.send(JSON.stringify(e))},close:function(e){t.close(e||1e3)}};return new Promise(a)}(e,n)};