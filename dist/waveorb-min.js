!function(){var n=async function(n,e){var t=1,o=1e3,r=1001,i="$cbid";e||(e={}),void 0!==e.reconnect&&!0!==e.reconnect||(e.reconnect=1e3),!0===e.ping&&(e.ping=1e3),void 0===e.disconnect&&(e.disconnect=3e3);for(var c,s,a,f,u,d={},p=["message","open","close","error"],l=0;l<p.length;l++)d[p[l]]=[];function v(n,...e){for(var t=0;t<d[n].length;t++)d[n][t](...e)}function g(t,o){s={},a=0,(c=new WebSocket(n)).onmessage=function(n){var e=JSON.parse(n.data),t=e[i];t?(delete e[i],s[t]&&(s[t](e,n),delete s[t])):v("message",e,n)},c.onopen=function(n){t&&t(h),v("open",h,n),e.ping&&(clearInterval(f),clearTimeout(u),f=setInterval(function(){w({$ping:1})},e.ping),u=setTimeout(function(){clearInterval(f),m(r)},e.disconnect))},c.onerror=function(n){o&&o(n),v("error",n)},c.onclose=function(n){e.reconnect&&setTimeout(g,e.reconnect),v("close",n)}}function m(n){n=n||o,c.close(n)}function w(n){c.readyState===t&&c.send(JSON.stringify(n))}var h={on:function(n,e){d[n].push(e)},connect:g,send:w,fetch:function(n){return new Promise(function(e){n[i]=++a,s[a]=function(n){e(n)},w(n)})},disconnect:m};return new Promise(g)};window.waveorb=function(e,t={}){return e.indexOf("ws")?function(n={},t={}){return function(n,e,t){return new Promise(function(o,r){t||(t={}),e||(e={});var i,c=new XMLHttpRequest;if(c.addEventListener("load",function(){var n=JSON.parse(c.responseText);o(n)}),c.addEventListener("error",function(){r(c)}),c.open(t.method||"POST",n+(t.path||"")),t.files){for(var s in i=new FormData,e)i.append(s,JSON.stringify(e[s]));for(var a of t.files)i.append("file",a,a.name);t.progress&&c.upload.addEventListener("progress",function(n){n.percent=(n.loaded/n.total*100).toFixed(2),t.progress(n)})}else c.setRequestHeader("Content-Type","application/json; charset=utf-8");c.withCredentials=!0,c.send(i||JSON.stringify(e))})}(e,n,t)}:new Promise(function(o){n(e,t).then(function(n){return o(n.fetch)})})}}();